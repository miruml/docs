---
title: "Staging area"
---

import { Framed } from '/snippets/components/framed.jsx';

<Framed 
  background="/images/releases/background.jpeg"
  image="/images/releases/stage/header:page.png"
  borderWidth="30px 0 0 48px"
  innerRadius="8px 0 0 0"
/>

## Overview

The staging area for a release is a place to create deployments in preparation for a future rollout. The staging area only contains `staged` deployments. Currently deployed and previously deployed deployments are not accessible in the staging area.

Deployments in the staging area can be freely created without being deployed to devices. This makes it an ideal place to prepare and review deployments before rolling them out.

Every release has its own staging area that is completely separate from other release's staging areas. This separation allows deployments to be staged for multiple releases simultaneously.

The staging area is also handy for batch operations. Deployments may be created, deployed, and archived in bulk, helpful for managing large numbers of deployments at once.

## View the staging area

To view a release's staging area, navigate to the [Releases page](https://app.miruml.com/releases) and click into a release.

<Frame>
  ![](https://assets.miruml.com/docs/images/releases/page.png)
</Frame>

Then select the **Stage** tab at the top of the page.

<Frame>
  ![](/images/releases/stage/page.png)
</Frame>

## Stage a deployment
 
To stage a deployment, click the **Stage Deployment** button in the top right. A dialog will appear with tabs for each config schema defined in the release. The tabs are pre-populated with the schema's default values.

<Frame>
  ![](/images/releases/stage/stage-dialog-step1:configs.png)
</Frame>

Make any desired edits to the config instances in the deployment, enter a description at the bottom of the dialog, and hit **Next**.

<Frame>
  ![](/images/releases/stage/stage-dialog-step1:description.png)
</Frame>

Select one or more devices to stage this deployment for. Selecting multiple devices creates a separate deployment for each device.

<Frame>
  ![](/images/releases/stage/stage-dialog-step2:select-devices.png)
</Frame>

You may find some devices unavailable for selection--these devices have configurations for *this release* which are currently deployed. This is not allowed. 

You can only stage deployments for devices which are running a *different release*. To patch configurations for such devices, make your edits in the device's [config editor](/docs/learn/devices/config-editor).

Once satisfied with the selected devices, click **Stage** at the bottom of the dialog.

<Frame>
  ![](/images/releases/stage/stage-dialog-step2:click-stage.png)
</Frame>

## View a deployment

To view a deployment in the staging area, select the deployment from the list of deployments in the staging area.

A panel will open on the right of the page displaying the deployment's details.

<Frame>
  ![](/images/deployments/staged-panel.png)
</Frame>

To view the details of any config instances in the deployment, click into the config instance in the **Configurations** section of the panel. 

<Frame>
  ![](/images/deployments/staged-panel:configurations.png)
</Frame>

The content tab contains the parameters in the config instance while the metadata tab contains audit information--the author, creation date, description, etc.

<Tabs>
  <Tab title="Content">
    <Frame>
      ![](/images/config-instances/panel-content.png)
    </Frame>
  </Tab>
  <Tab title="Metadata">
    <Frame>
      ![](/images/config-instances/panel-metadata:staged.png)
    </Frame>
  </Tab>
</Tabs>

## Patch a deployment

Patching a deployment is the process of creating a new deployment to take the place of an existing deployment. Patching explicitly marks the original deployment as the predecessor of the new deployment, making it easy to trace the history of changes for a device's configurations.

When patching a deployment, the original deployment is archived and removed from the staging area with the new deployment taking its place.

To patch a deployment, click the ellipses (...) on the deployment to patch and select **Patch** from the dropdown.

<Frame>
  ![](/images/releases/stage/ellipses-dropdown:staged.png)
</Frame>

A dialog will appear with the original deployment's config instances populated in each tab. Make any desired edits to the deployment's config instances. These edits will be applied to the new deployment.

<Frame>
  ![](/images/releases/stage/patch-dialog:configurations.png)
</Frame>

Once satisfied with the edits, enter a description at the bottom of the dialog and hit **Stage**.

<Frame>
  ![](/images/releases/stage/patch-dialog:description.png)
</Frame>

## Archive a deployment

Archiving a deployment removes it from the staging area and marks it as `archived`. 

This action is irreversible. Once archived, a deployment can never be deployed to a device. However, the deployment will remain available for historical reference.

**Single Deployment**

To archive a single deployment, click the ellipses (...) on the deployment to archive and select **Archive** from the dropdown.

<Frame>
  ![](/images/releases/stage/ellipses-dropdown:staged.png)
</Frame>

A confirmation dialog will appear. Hit **Archive** to confirm.

<Frame>
  ![](/images/releases/stage/archive-dialog:single.png)
</Frame>

**Multiple Deployments**

To archive multiple deployments, hover over the deployments you want to archive and click the checkbox on the far left of the deployment.

<Frame>
  ![](/images/releases/stage/select-devices.png)
</Frame>

At the bottom of the page, click **Archive** from the available bulk actions.

<Frame>
  ![](/images/releases/stage/bulk-actions.png)
</Frame>

A confirmation dialog will appear. Hit **Archive** to confirm. 

<Frame>
  ![](/images/releases/stage/archive-dialog:bulk.png)
</Frame>

## Deployment drift

When a device receives configuration updates for its current release while having deployments staged for another release, we say the staged deployment has *drifted*.

Consider the following example:

![](/images/deployments/deployment-drift.png)

Our device is currently running deployment `DPL-Npfzv`, which adheres to release `v1.5`. Our device is about to upgrade to release `v1.6` though, so we've staged deployment `DPL-Q4CeX` for the upcoming upgrade.

However, before the upgrade occurs, our device receives some configuration updates on release `v1.5`-- `DPL-Npfzv` is patched with `DPL-BFwc3`. Since it's often the case that this patch also needs to be applied to the staged deployment `DPL-Q4CeX`, we say `DPL-Q4CeX` has *drifted*.

When a deployment drifts, it is marked as `needs review` and cannot be deployed until an explicit review is performed. You must either ignore the patch, or apply the patch to the staged deployment. 

The concept of deployment drift ensures that configuration changes aren't lost when migrating from one release to another, preventing misconfigurations.

## Review a deployment

Reviewing a deployment is only possible when a deployment has [drifted](#deployment-drift) and is in the `needs review` state. Otherwise, the review button is disabled.

Reviewing a deployment displays the patches that have occurred for a device since the last time that the deployment was reviewed (or when it was initially staged).

To review a deployment, click the ellipses (...) on the deployment to review and select **Review** from the dropdown.

<Frame>
  ![](/images/releases/stage/ellipses-dropdown:drifted.png)
</Frame>

A dialog will appear with a list of deployments that have been patched to the device since the last time the deployment was reviewed (or when it was initially staged).

<Frame>
  ![](/images/releases/stage/review-dialog:deployments.png)
</Frame>

Clicking into a deployment will open the deployment details panel on the right of the page. And clicking into their Configurations will open the config instance details panel with the differences highlighted.

After reviewing the patches, you have two options to proceed.

<Tabs>
  <Tab title="Restage">
    The first option is to restage the deployment as-is, effectively ignoring the patches that have occurred. This will move the deployment to the `staged` state and allow it to be deployed.

    <Frame>
      ![](/images/releases/stage/review-dialog:restage.png)
    </Frame>
  </Tab>
  <Tab title="Archive">

    The second option is to [archive](#archive-a-deployment) the deployment. This removes the deployment from the staging area and moves it to the `archived` state.

    <Frame>
      ![](/images/releases/stage/review-dialog:archive.png)
    </Frame>
  </Tab>
</Tabs>

<Note>
  The ability to apply patches to a drifted deployment is currently unavailable but will be coming soon!
</Note>